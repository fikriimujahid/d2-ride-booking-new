# Required for Cognito JWT verification (Phase A)
COGNITO_REGION=ap-southeast-1
COGNITO_USER_POOL_ID=ap-southeast-1_XXXXXXXXX
COGNITO_APP_CLIENT_ID=xxxxxxxxxxxxxxxxxxxxxxxxxx

# Optional
PORT=3000
NODE_ENV=dev
SWAGGER_ENABLED=true

# Phase B (RBAC + Prisma + MySQL)

# Local (static password auth)
DB_AUTH_MODE=static
DATABASE_URL="mysql://root:password@localhost:3306/d2_rbac_dev"

# Prisma migrate dev uses a "shadow database" to calculate diffs.
# If your DB user cannot CREATE DATABASE, either:
# - run migrations with a privileged DATABASE_URL (e.g. root), or
# - pre-create a shadow DB and set SHADOW_DATABASE_URL to it.
#
# Example (shadow DB that already exists):
# SHADOW_DATABASE_URL="mysql://app_user:local_dev_password_change_me@localhost:3306/prisma_shadow"

# If you use the docker-compose MySQL from the repo root, app_user is:
#   user: app_user
#   pass: local_dev_password_change_me
#   db:   ridebooking

# Prisma seed (RBAC bootstrap)
# Required: Cognito user's `sub` to map the seeded admin to.
SEED_ADMIN_COGNITO_SUB="00000000-0000-0000-0000-000000000000"
# Optional
SEED_ADMIN_EMAIL="admin@test.d2.fikri.dev"
# Optional: SUPER_ADMIN | OPERATION_MANAGER | ANALYST
SEED_ADMIN_ROLE=SUPER_ADMIN

# AWS (RDS IAM auth) - set DB_AUTH_MODE=iam and fill these out
# DB_AUTH_MODE=iam
# DB_HOST=your-rds-endpoint.amazonaws.com
# DB_PORT=3306
# DB_USER=app_user
# DB_NAME=d2_rbac_dev
# DB_IAM_REGION=ap-southeast-1
# DB_IAM_TOKEN_REFRESH_SECONDS=600
# DB_IAM_REQUIRE_SSL=true

# Notes:
# - Prisma ORM v7 reads the datasource URL from prisma.config.ts; runtime uses a driver adapter.
# - For Prisma CLI commands (migrate/seed), set DATABASE_URL (static) or generate one via `npm run db:iam:url`.
